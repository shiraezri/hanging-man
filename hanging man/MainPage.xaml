<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="hanging_man.MainPage"
             BackgroundColor="#FFE6ED">

    <ContentPage.Resources>
        <ResourceDictionary>
            <!-- סגנונות מקוצרים להשאיר כמו בקוד המקורי שלך -->
            <Style x:Key="LetterButtonStyle" TargetType="Button">
                <Setter Property="FontAttributes" Value="Bold"/>
                <Setter Property="BackgroundColor" Value="#CF7486"/>
                <Setter Property="TextColor" Value="#FFE6ED"/>
                <Setter Property="WidthRequest" Value="35"/>
                <Setter Property="HeightRequest" Value="35"/>
                <Setter Property="CornerRadius" Value="5"/>
                <Setter Property="Margin" Value="2"/>
            </Style>

            <Style x:Key="LetterLabelStyle" TargetType="Label">
                <Setter Property="FontSize" Value="28"/>
                <Setter Property="WidthRequest" Value="40"/>
                <Setter Property="HeightRequest" Value="40"/>
                <Setter Property="BackgroundColor" Value="Pink"/>
                <Setter Property="TextColor" Value="#CF7486"/>
                <Setter Property="HorizontalTextAlignment" Value="Center"/>
                <Setter Property="VerticalTextAlignment" Value="Center"/>
                <Setter Property="FontAttributes" Value="Bold"/>
                <Setter Property="Margin" Value="2"/>
            </Style>

            <Style x:Key="RestartButtonStyle" TargetType="Button">
                <Setter Property="BackgroundColor" Value="#FFE6ED"/>
                <Setter Property="BorderColor" Value="#CF7486"/>
                <Setter Property="BorderWidth" Value="2"/>
                <Setter Property="TextColor" Value="#CF7486"/>
                <Setter Property="WidthRequest" Value="200"/>
                <Setter Property="Margin" Value="0,10"/>
            </Style>

            <Style x:Key="ScoreLabelStyle" TargetType="Label">
                <Setter Property="FontSize" Value="18"/>
                <Setter Property="TextColor" Value="#CF7486"/>
                <Setter Property="FontAttributes" Value="Bold"/>
                <Setter Property="HorizontalOptions" Value="Start"/>
                <Setter Property="Margin" Value="0,5,0,0"/>
            </Style>
        </ResourceDictionary>
    </ContentPage.Resources>

    <Grid RowDefinitions="Auto, *, Auto">

        <!-- כותרת -->
        <Label Text="HANGMAN"
               TextColor="#CF7486"
               FontSize="32"
               FontAttributes="Bold"
               HorizontalOptions="Center"
               Grid.Row="0"
               Margin="0,20,0,10" />

        <!-- גוף המשחק -->
        <Grid Grid.Row="1" ColumnSpacing="20" Padding="20">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="5*" />
                <ColumnDefinition Width="3*" />
            </Grid.ColumnDefinitions>

            <!-- צד שמאל -->
            <Grid Grid.Column="0" RowSpacing="10">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <!-- שם השחקן + בדיקת קלט -->
                <VerticalStackLayout Grid.Row="0" Spacing="4">
                    <HorizontalStackLayout Spacing="10">
                        <Label Text="Player:" FontSize="16" TextColor="#CF7486" />
                        <Entry x:Name="PlayerNameEntry"
                               Placeholder="Enter name"
                               FontSize="16"
                               WidthRequest="150"
                               TextChanged="Check_Input"
                               TextColor="#CF7486"/>
                    </HorizontalStackLayout>
                    <Label x:Name="ErrorLabel"
                           Text=""
                           FontSize="14"
                           TextColor="Transparent"/>
                </VerticalStackLayout>

                <!-- בורר אורך מילה -->
                <Picker
                    Title="Select word length"
                    TitleColor="#CF7486"
                    ItemsSource="{Binding WordLengths}"
                    SelectedItem="{Binding SelectedWordLength}"
                    FontSize="16"
                    TextColor="#CF7486"
                    Margin="0,0,0,5"
                    HorizontalOptions="Start"
                    WidthRequest="180"
                    Grid.Row="1" />

                <!-- רשת אותיות -->
                <Grid x:Name="LettersGrid"
                      Grid.Row="2"
                      RowSpacing="5"
                      ColumnSpacing="5"
                      HorizontalOptions="Start">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                </Grid>

                <!-- ניקוד -->
                <Label Grid.Row="3"
                       Text="{Binding ScoreText}"
                       Style="{StaticResource ScoreLabelStyle}" />

                <!-- תצוגת המילה -->
                <HorizontalStackLayout x:Name="WordDisplay"
                                       Grid.Row="4"
                                       Spacing="5"
                                       HorizontalOptions="Start"
                                       VerticalOptions="EndAndExpand"
                                       Margin="0,10,0,0" />
            </Grid>

            <!-- צד ימין - האיש התלוי -->
            <Image Grid.Column="1"
                   Aspect="AspectFit"
                   HeightRequest="500"
                   HorizontalOptions="End"
                   VerticalOptions="Center"
                   Source="{Binding HangmanImageSource}" />
        </Grid>

        <!-- כפתור ריסטארט -->
        <Button Text="RESTART GAME"
                Grid.Row="2"
                HorizontalOptions="Center"
                Style="{StaticResource RestartButtonStyle}"
                Clicked="RestartGame"/>
    </Grid>
</ContentPage>


